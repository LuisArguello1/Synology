<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Login - NAS Manager</title>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&family=Oswald:wght@500;700&family=Lora:ital@0;1&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script id="tailwind-config">
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "primary": "#14b8a6", // teal-500
                        "primary-hover": "#0d9488", // teal-600
                        "background-light": "#F9FAFB",
                    },
                    fontFamily: {
                        "sans": ["Manrope", "sans-serif"],
                        "display": ["Oswald", "sans-serif"],
                        "serif": ["Lora", "serif"]
                    },
                    backgroundImage: {
                        'grid-pattern': "linear-gradient(rgba(15, 23, 42, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(15, 23, 42, 0.03) 1px, transparent 1px)"
                    }
                },
            },
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .btn-inset-shadow {
                box-shadow: inset 0 2px 4px 0 rgba(20, 184, 166, 0.15), inset 0 1px 2px 0 rgba(20, 184, 166, 0.1);
            }
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #F9FAFB; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
    </style>
</head>
<body class="font-sans bg-background-light text-slate-800 antialiased overflow-hidden">
<div class="relative h-screen w-full bg-[#F9FAFB] flex flex-col overflow-hidden">
    <div class="absolute inset-0 z-0 bg-grid-pattern bg-[size:32px_32px] pointer-events-none"></div>
    <div class="absolute inset-0 z-0 bg-gradient-to-br from-white via-transparent to-slate-200/30 pointer-events-none"></div>
    <main class="relative z-10 flex-grow flex flex-col md:flex-row items-stretch h-full overflow-hidden">
        <div class="w-full md:w-[45%] lg:w-[40%] flex items-center justify-center p-6 md:p-10 lg:p-12 bg-white shadow-2xl z-20 overflow-y-auto">
            <div class="w-full max-w-[360px]">
                <div class="mb-6">
                    <div class="inline-flex items-center justify-center p-2.5 bg-teal-50 border border-teal-100 rounded-lg mb-4 shadow-sm">
                        <span class="material-symbols-outlined text-primary text-4xl">shield_lock</span>
                    </div>
                    <h1 class="text-3xl md:text-4xl font-display font-bold uppercase tracking-tight text-slate-900 leading-none mb-1">
                        NAS Portal
                    </h1>
                    <p class="text-slate-500 text-[10px] font-medium uppercase tracking-wider">Administrative Control</p>
                </div>
                
                <!-- Alertas (Django messages) -->
                <div class="mb-4">
                    {% include 'fragments/alerts.html' %}
                </div>

                <form method="post" action="{% url 'accounts:login' %}{% if request.GET.next %}?next={{ request.GET.next }}{% endif %}" class="flex flex-col gap-4">
                    {% csrf_token %}
                    
                    <div class="group">
                        <label for="{{ form.username.id_for_label }}" class="block text-slate-700 text-[9px] font-bold uppercase tracking-[0.2em] mb-1.5 ml-1">{{ form.username.label }}</label>
                        <div class="relative transition-all duration-200">
                            <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                                <span class="material-symbols-outlined text-slate-400 group-focus-within:text-primary transition-colors text-lg">account_circle</span>
                            </div>
                            <input type="text" 
                                   name="{{ form.username.name }}" 
                                   id="{{ form.username.id_for_label }}"
                                   class="w-full bg-slate-50 border border-slate-200 rounded-sm py-2.5 pl-10 pr-4 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-200" 
                                   placeholder="admin_access" 
                                   required
                                   {% if form.username.value %}value="{{ form.username.value }}"{% endif %}/>
                        </div>
                        {% if form.username.errors %}
                            <p class="text-[10px] text-red-600 mt-1 flex items-center">
                                <span class="material-symbols-outlined text-[10px] mr-1">error</span>
                                {{ form.username.errors.0 }}
                            </p>
                        {% endif %}
                    </div>

                    <div class="group" x-data="{ show: false }">
                        <label for="{{ form.password.id_for_label }}" class="block text-slate-700 text-[9px] font-bold uppercase tracking-[0.2em] mb-1.5 ml-1">{{ form.password.label }}</label>
                        <div class="relative transition-all duration-200">
                            <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                                <span class="material-symbols-outlined text-slate-400 group-focus-within:text-primary transition-colors text-lg">key</span>
                            </div>
                            <input :type="show ? 'text' : 'password'" 
                                   name="{{ form.password.name }}"
                                   id="{{ form.password.id_for_label }}"
                                   class="w-full bg-slate-50 border border-slate-200 rounded-sm py-2.5 pl-10 pr-11 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-200" 
                                   placeholder="••••••••" 
                                   required/>
                            <button @click="show = !show" class="absolute inset-y-0 right-0 pr-3.5 flex items-center cursor-pointer text-slate-400 hover:text-slate-600 transition-colors" type="button">
                                <span class="material-symbols-outlined text-[18px]" x-text="show ? 'visibility' : 'visibility_off'"></span>
                            </button>
                        </div>
                        {% if form.password.errors %}
                            <p class="text-[10px] text-red-600 mt-1 flex items-center">
                                <span class="material-symbols-outlined text-[10px] mr-1">error</span>
                                {{ form.password.errors.0 }}
                            </p>
                        {% endif %}
                    </div>

                    {% if form.non_field_errors %}
                        <div class="p-2.5 bg-red-50 border border-red-200 rounded-sm text-[10px] text-red-700 flex items-start gap-2">
                            <span class="material-symbols-outlined text-[14px] mt-0.5">warning</span>
                            <span>{{ form.non_field_errors.0 }}</span>
                        </div>
                    {% endif %}

                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2 py-0.5">
                            <div class="relative flex items-center">
                                <input class="peer h-3.5 w-3.5 cursor-pointer appearance-none rounded-sm border border-slate-300 bg-white checked:border-primary checked:bg-primary transition-all hover:border-primary focus:ring-0 focus:ring-offset-0" 
                                       id="{{ form.remember_me.id_for_label }}" 
                                       name="{{ form.remember_me.name }}"
                                       type="checkbox"
                                       {% if form.remember_me.value %}checked{% endif %}/>
                                <span class="pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white opacity-0 peer-checked:opacity-100">
                                    <svg class="h-2.5 w-2.5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path clip-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" fill-rule="evenodd"></path>
                                    </svg>
                                </span>
                            </div>
                            <label class="cursor-pointer select-none text-[10px] text-slate-600 font-bold uppercase tracking-wider" for="{{ form.remember_me.id_for_label }}">{{ form.remember_me.label }}</label>
                        </div>
                    </div>
                    
                    <button type="submit" class="group relative w-full overflow-hidden rounded-sm bg-teal-50 border border-teal-300 py-3 text-[10px] font-bold uppercase tracking-widest text-teal-700 btn-inset-shadow transition-all hover:bg-teal-100 active:scale-[0.98]">
                        <span class="relative z-10 flex items-center justify-center gap-2.5">
                            Autenticar
                            <span class="material-symbols-outlined text-[18px] transition-transform group-hover:translate-x-1">verified_user</span>
                        </span>
                    </button>
                </form>
                
            </div>
        </div>
        
        <div class="hidden md:flex flex-1 flex-col p-8 lg:p-12 relative overflow-hidden">
            <div class="relative z-10 h-full flex flex-col max-h-full">
                <div class="mb-8">
                    <h2 class="text-xl font-display font-bold text-slate-800 uppercase tracking-wide mb-1">Live Network Topology</h2>
                    <div class="h-0.5 w-16 bg-primary"></div>
                </div>
                <div class="grid grid-cols-2 gap-4 flex-grow content-start overflow-y-auto pr-2">
                    <div class="bg-white/60 backdrop-blur-md border border-slate-200/50 p-4 rounded-sm shadow-sm flex flex-col justify-between">
                        <div>
                            <span class="material-symbols-outlined text-teal-600 text-xl mb-2">analytics</span>
                            <h3 class="font-serif italic text-slate-700 text-sm mb-0.5">Inbound Traffic</h3>
                        </div>
                        <div>
                            <p class="text-2xl font-display font-bold text-slate-900 leading-none">{{ metrics.system.network.download|default:"0 KB/s" }}</p>
                            <p class="text-emerald-600 text-[9px] font-bold uppercase tracking-tighter mt-0.5">↑ Activo ahora</p>
                        </div>
                    </div>
                    <div class="bg-white/60 backdrop-blur-md border border-slate-200/50 p-4 rounded-sm shadow-sm flex flex-col justify-between">
                        <div>
                            <span class="material-symbols-outlined text-teal-600 text-xl mb-2">storage</span>
                            <h3 class="font-serif italic text-slate-700 text-sm mb-0.5">Volume Health</h3>
                        </div>
                        <div class="flex items-end justify-between">
                            <p class="text-2xl font-display font-bold text-slate-900 leading-none">{% if metrics.storage.percent_used %}{{ metrics.storage.percent_used }}%{% else %}100%{% endif %}</p>
                            <div class="flex gap-0.5 mb-1">
                                <div class="w-1 h-2.5 {% if metrics.storage.percent_used < 90 %}bg-teal-500{% else %}bg-amber-500{% endif %}"></div>
                                <div class="w-1 h-2.5 {% if metrics.storage.percent_used < 70 %}bg-teal-500{% else %}bg-slate-200{% endif %}"></div>
                                <div class="w-1 h-2.5 {% if metrics.storage.percent_used < 50 %}bg-teal-500{% else %}bg-slate-200{% endif %}"></div>
                                <div class="w-1 h-2.5 {% if metrics.storage.percent_used < 30 %}bg-teal-500{% else %}bg-slate-200{% endif %}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-span-2 bg-slate-800 p-6 rounded-sm shadow-xl flex items-center justify-between overflow-hidden relative min-h-[100px]">
                        <div class="absolute -right-6 -bottom-6 opacity-10">
                            <span class="material-symbols-outlined text-[100px] text-white">lan</span>
                        </div>
                        <div class="relative z-10">
                            <div class="flex items-center gap-2 mb-1.5">
                                <span class="relative flex h-2 w-2">
                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                                    <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                                </span>
                                <p class="font-serif italic text-teal-400 text-xs text-[11px]">System integrity verified</p>
                            </div>
                            <h3 class="text-xl font-display font-bold text-white uppercase tracking-wider">Node 01: {% if metrics.health.is_ok %}Operational{% else %}Check Health{% endif %}</h3>
                            <p class="text-slate-400 text-[9px] mt-1.5 uppercase tracking-[0.12em]">Last breach attempt: 0 detected (24h)</p>
                        </div>
                        <div class="relative z-10 text-right">
                            <div class="text-emerald-400 font-mono text-lg">0.05ms</div>
                            <div class="text-slate-500 text-[9px] uppercase font-bold">Latency</div>
                        </div>
                    </div>
                    <div class="col-span-2 flex items-center justify-center border border-dashed border-slate-300 rounded-sm opacity-40 p-6 min-h-[140px]">
                        <div class="flex flex-col items-center">
                            <span class="material-symbols-outlined text-[60px] text-slate-400 mb-1.5">hub</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
</body>
</html>
